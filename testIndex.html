<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <link rel="stylesheet" href="css/test.css">
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
        class AboutSection extends React.Component {
            constructor(props) {
                super(props);
                this.state = {
                    error: null,
                    isLoaded: false,
                    bandMembers: []
                };
            }

            componentDidMount() {
            // TODO: do it this way for production
            //   fetch("data/about.json")
            //     .then(res => res.json())
            // NOTE: for testing
                new Promise(function (resolve) {
                    setTimeout(() => {
                        resolve({
                            "bandMembers": [
                                {
                                    "bandName": "BROTHER SMOOTH",
                                    "realName": "Sattam Deb",
                                    "image": "images/bitterend-1341x511.jpg",
                                    "role": "Singer, Keyboards, Guitar",
                                    "description": [
                                        "Sattam has been the main songwriter for the band over the years originally on guitar he as been persuaded to use his talents on the keys and has enabled a new sound to the band.",
                                        "He has the ability to sing the funkiest dance tunes and then turn it down for some smooth ballads."
                                    ]
                                },
                                {
                                    "bandName": "FUNKBURY",
                                    "realName": "Mark Westbury",
                                    "image": "images/bitterend-13.jpg",
                                    "role": "Drummer, Backing Vocalist",
                                    "description": [
                                        "Mark has been a co-songwriter for the band and adds the harmonies when  needed. Originally from Australia he has been banging the skins for many years.",
                                        "He has the ability to kick out the funkiest beats has given this band the backbone they need to keep the dancers on the dance floor."
                                    ]
                                },
                                {
                                    "bandName": "KING FUNKY",
                                    "realName": "Bennett Reid",
                                    "image": "images/bitterend-5662x442.jpg",
                                    "role": "Lead Guitar, Backing Vocalist",
                                    "description": [
                                        "Bennett has been with purple gravy since 2017, adding a much needed guitar sound to energize everyone in the room.",
                                        "His ability to add that funky flavor to start a track and finish off with a killer solo have made him \"King Funky\""
                                    ]
                                },
                                {
                                    "bandName": "UNCLE FUNKY",
                                    "realName": "TBD",
                                    "image": "https://dummyimage.com/100",
                                    "role": "Bassist",
                                    "description": [
                                        "Awaiting to fill the spot for bassist for the band, please contact us below if you are ready to be part of the purple gravy experience."
                                    ]
                                }
                            ]
                        });
                    }, 2000);
                })
                .then(
                (result) => {
                    this.setState({
                        isLoaded: true,
                        bandMembers: result.bandMembers
                    });
                },
                // Note: it's important to handle errors here
                // instead of a catch() block so that we don't swallow
                // exceptions from actual bugs in components.
                (error) => {
                    this.setState({
                        isLoaded: true,
                        error
                    });
                }
                )
            }

            render() {
                const { error, isLoaded, bandMembers } = this.state;
                if (error) {
                    return <div>Error: {error.message}</div>;
                } else if (!isLoaded) {
                    return <div>Loading...</div>;
                } else {
                    return (
                    <ul className="about">
                        {bandMembers.map((item, index) => (
                        <li className="about__member" key={item.bandName + index}>
                            <div className="about__title">{item.bandName}</div>
                            <div className="about__real-name">{item.realName}</div>
                            <div className="about__role">{item.role}</div>
                            <div className="about__description">
                                {item.description.map((para, index) => (
                                    <p key={"para" + index}>{para}</p>
                                ))}
                                <img className="about__image" src={item.image} />
                            </div>
                        </li>
                        ))}
                    </ul>
                    );
                }
            }
        }

        ReactDOM.render(
        <AboutSection />,
        document.getElementById('root')
        );
    </script>
    <!--
      Note: this page is a great way to try React but it's not suitable for production.
      It slowly compiles JSX with Babel in the browser and uses a large development build of React.

      To set up a production-ready React build environment, follow these instructions:
      * https://reactjs.org/docs/add-react-to-a-new-app.html
      * https://reactjs.org/docs/add-react-to-an-existing-app.html

      You can also use React without JSX, in which case you can remove Babel:
      * https://reactjs.org/docs/react-without-jsx.html
      * https://reactjs.org/docs/cdn-links.html
    -->
  </body>
</html>